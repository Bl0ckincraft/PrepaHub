<header class="absolute z-[3] top-0 left-0 right-0">
    <div class="container flex flex-row mx-auto items-center">
        <a class="flex flex-row items-center p-1 rounded-2xl title-part darker-hover pe-2" href="{{ path('app_home') }}">
            <img class="icon" alt="logo" src="{{ asset("images/icon.png") }}"/>
            <span class="text-xl sm:text-2xl mx-2 font-black uppercase">Prépa Lib</span>
        </a>
        <div class="menu-switch flex flex-row items-center ms-auto rounded-2xl darker-hover interact-part">
            <i class=" fa-solid fa-bars text-3xl p-4"></i>
        </div>
    </div>
    <div id="menu">
        <div id="menu-content" class="p-4 overflow-y-scroll">
            <div class="menu-switch rounded-2xl p-3 darker-hover top-part flex flex-row items-center">
                <img class="icon" alt="logo" src="{{ asset("images/icon.png") }}"/>
                <div class="mx-auto">
                    <span class="text-2xl uppercase font-bold">Menu</span>
                </div>
                <div>
                    <i class="text-3xl fa-solid fa-xmark p-4"></i>
                </div>
            </div>

            <hr class="my-4"/>

            <div class="nav-items-part mb-auto pt-4 mx-3 flex flex-col gap-5">
                <twig:MenuItem title="Statistiques" details="Découvrir les statistiques du site !" iconClass="fa-solid fa-chart-pie" targetUrl="{{ path('app_home') }}#stats"/>
                {% if user %}
                    <twig:MenuItem title="Ressources" details="Parcourir aux ressources disponibles !" iconClass="fa-solid fa-tags" targetUrl=""/>
                    <twig:MenuItem title="Suggestions" details="Proposer une idée d'amélioration ou de nouveaux contenus !" iconClass="fa-solid fa-lightbulb" targetUrl=""/>
                    <twig:MenuItem title="{{ user.firstname }} {{ user.lastname }}" details="Accéder à mon espace personnel !" iconClass="fa-solid fa-user" targetUrl="{{ path('app_profile') }}"/>
                    <twig:MenuItem title="Déconnexion" details="Abandonner les révisions et se relâcher !" iconClass="fa-solid fa-right-from-bracket" targetUrl="{{ path("app_logout") }}"/>
                {% else %}
                    <twig:MenuItem title="Connexion" details="Se connecter pour accéder aux ressources !" iconClass="fa-solid fa-right-to-bracket" targetUrl="{{ path("app_login") }}"/>
                    <twig:MenuItem title="Inscription" details="Créer son compte pour en savoir plus !" iconClass="fa-solid fa-user-plus" targetUrl="{{ path("app_register") }}"/>
                {% endif %}
            </div>
        </div>
        <div id="menu-modal">

        </div>
    </div>
</header>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        let menuSwitch = document.getElementsByClassName("menu-switch");
        let menu = document.getElementById("menu");
        let menuModal = document.getElementById("menu-modal");

        let switchMenu = (action) => {
            if (menu.classList.contains("enabled") && (action == null || typeof action == "undefined" || action === "close")) {
                menu.classList.remove("enabled")
            } else if (!menu.classList.contains("enabled") && (action == null || typeof action == "undefined" || action === "open")) {
                menu.classList.add("enabled")
            }
        }

        for (let s of menuSwitch) {
            s.addEventListener("click", () => {
                switchMenu();
            });
        }

        menuModal.addEventListener("click", () => {
            switchMenu("close");
        })
    })
</script>
